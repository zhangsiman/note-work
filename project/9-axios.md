---
title: axios 专题讲解
---

axios 是我们用来发 HTTP 请求到服务器端的，但是一个完整的
AJAX 其实是有两步组成：

- 第一步，向服务器发送请求，同时保证页面不刷新
- 第二步，服务器执行完成之后，客户端页面要做出调整

第一步，可以用 axios 的接口实现：

```
axios.post('/posts', data)
```

第二步，axios 也可以实现，就是

```
.then(function(){
  // 更改页面效果的 JS 代码
  })
```

.then() 的执行条件就是服务成功返回之后。


### .then() 什么时候被执行？

服务器端执行成功。但是，如何服务器不给客户端返回 200 的这个状态码，.then() 就不执行。

>小贴士：状态码
> Status Code 是服务器返回给客户端的一个整数，如果返回
20x 表示返回成功，如果返回 50x 表示服务器执行失败。

具体操作，我们可以用 res.status(200) 这样的接口明文发送状态码，但是如果我们只写

```
res.json({ message: '操作成功了！'})
```

到客户端浏览器的开发者工具中，也可以看到200的状态码，所以 .then 也可以被触发。



### .catch() 什么时候被执行？

服务端执行失败。如果服务器给客户端返回500，那么 .catch() 就会被触发。


```
res.status(500)
```

这样，就会触发 .catch() 的语句。


### 页面实现任意功能的一般流程

从执行时间顺序来看：

- 首先，收集页面数据
- 发送请求到服务器
- 服务器匹配客户端请求的路由，执行相应 API
- API 中一般会涉及到数据库读写
- API 返回数据，或者 200/500 状态码给客户端
- 客户端收到相应，进行页面调整

思路不会，这是老师教的不好，细节被卡住，google 能力不够。

从动手开发角度：

- 先做 API ，然后用 curl 测试
- 然后调前台代码
